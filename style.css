:root{
  --bg:#eef1f5;
  --bg2:#f6f7fb;
  --text:#0f172a;
  --muted:rgba(15,23,42,.62);
  --shadow-dark:rgba(15,23,42,.14);
  --shadow-light:rgba(255,255,255,.92);
  --stroke:rgba(15,23,42,.08);
  --accent:#fb7185;
  --accent2:#60a5fa;
  --radius:22px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Noto Sans Thai",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:var(--text);background:var(--bg)}
body{overflow-x:hidden}

/* BG */
#bg-layer{position:fixed;inset:0;pointer-events:none;z-index:0}
#bg-image{width:100%;height:100%;object-fit:cover;opacity:.18;filter:blur(18px) saturate(1.05);transform:scale(1.06)}
.bg-vignette{position:absolute;inset:-10%;background:
 radial-gradient(circle at 20% 10%, rgba(255,255,255,.65), rgba(255,255,255,0) 52%),
 radial-gradient(circle at 80% 70%, rgba(255,255,255,.5), rgba(255,255,255,0) 58%),
 radial-gradient(circle at 50% 100%, rgba(0,0,0,.06), rgba(0,0,0,0) 55%);
 mix-blend-mode:soft-light}
.bg-grain{position:absolute;inset:0;opacity:.06;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");mix-blend-mode:multiply}

/* Intro */
.intro{position:fixed;inset:0;z-index:50;display:grid;place-items:center;background:linear-gradient(180deg,rgba(246,247,251,.92),rgba(238,241,245,.92));backdrop-filter:blur(14px)}
.intro.hidden{display:none}
.intro-card{
  width:min(540px,calc(100% - 32px));
  border-radius:28px;
  padding:22px 18px 16px;
  background:var(--bg2);
  border:1px solid var(--stroke);
  box-shadow:18px 18px 50px var(--shadow-dark), -18px -18px 50px var(--shadow-light);
  text-align:center
}
.intro-logo{
  width:62px;height:62px;border-radius:18px;margin:0 auto 10px;
  display:grid;place-items:center;font-weight:800;letter-spacing:.12em;
  color:rgba(15,23,42,.78);background:var(--bg);
  box-shadow:inset 10px 10px 18px rgba(15,23,42,.12), inset -10px -10px 18px rgba(255,255,255,.9)
}
.intro-title{font-size:22px;font-weight:800}
.intro-sub{margin-top:6px;color:var(--muted);font-size:14px}
.btn{border:0;border-radius:999px;padding:10px 14px;font-weight:800;cursor:pointer}
.btn-ghost{margin-top:14px;background:transparent;border:1px solid var(--stroke);color:rgba(15,23,42,.72)}

/* Top dock */
.top{position:sticky;top:0;z-index:10;padding:14px 14px 8px;background:linear-gradient(180deg, rgba(238,241,245,.92), rgba(238,241,245,.45));backdrop-filter:blur(12px)}
.top-inner{max-width:980px;margin:0 auto}
.tangmo-dock{
  display:flex;align-items:flex-start;gap:12px;
  padding:12px 14px;border-radius:28px;
  background:var(--bg2);border:1px solid var(--stroke);
  box-shadow:14px 14px 40px var(--shadow-dark), -14px -14px 40px var(--shadow-light)
}
.brand-logo{
  width:72px;height:72px;border-radius:18px;object-fit:contain;
}

.mic{
  width:86px;height:86px;border-radius:999px;border:0;cursor:pointer;position:relative;
  background:var(--bg);
  box-shadow:inset 12px 12px 20px rgba(15,23,42,.12), inset -12px -12px 20px rgba(255,255,255,.92);
  transition:box-shadow .2s ease, filter .2s ease, transform .15s ease;
  overflow:hidden;
}
.mic-core{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
  width:80%;height:80%;border-radius:999px;
  background:#b91c1c url("/assets/mic.png") center/50% 50% no-repeat;
  box-shadow:
    inset 0 0 0 3px rgba(255,255,255,.28),
    0 12px 24px rgba(15,23,42,.28);
}
.mic.listening,
.mic.speaking,
.mic.processing{
  box-shadow:
    0 0 0 12px rgba(185,28,28,.12),
    0 0 24px rgba(185,28,28,.42),
    inset 12px 12px 20px rgba(15,23,42,.10),
    inset -12px -12px 20px rgba(255,255,255,.92);
  animation: micPulseRed 1.15s ease-in-out infinite;
  transform:scale(1.02);
}
@keyframes micPulseRed{
  0%{filter:drop-shadow(0 0 0 rgba(185,28,28,0))}
  50%{filter:drop-shadow(0 0 14px rgba(185,28,28,.55))}
  100%{filter:drop-shadow(0 0 0 rgba(185,28,28,0))}
}
.tangmo-meta{flex:1;min-width:0}
.tangmo-name{font-weight:900}
.tangmo-sub{font-size:12px;color:var(--muted);margin-top:2px}

.dock-actions{display:flex;align-items:center;gap:10px}
.hint{margin-top:8px;font-size:12px;color:var(--muted);text-align:center}

.chat-dock{
  flex:2;
  min-width:0;
  transition:max-height .35s ease, opacity .35s ease, padding .35s ease;
  max-height:0;
  opacity:0;
  overflow:hidden;
  padding:0;
}
.chat-dock.show{
  max-height:220px;
  opacity:1;
  padding:4px 0 0;
}
.chatlog{
  border-radius:18px;
  padding:12px;
  background:#fff;
  border:1px solid var(--stroke);
  box-shadow:inset 6px 6px 14px rgba(15,23,42,.06), inset -6px -6px 14px rgba(255,255,255,.85);
  min-height:80px;
  max-height:200px;
  overflow:auto;
  transition:max-height .3s ease, opacity .3s ease;
}
.chat-dock{
  margin-top:10px;
  transition:max-height .35s ease, opacity .35s ease;
  max-height:0;
  opacity:0;
  overflow:hidden;
}
.chat-dock.show{
  max-height:420px;
  opacity:1;
}

/* switch */
.switch{position:relative;display:inline-block;width:44px;height:26px}
.switch input{display:none}
.slider{
  position:absolute;cursor:pointer;inset:0;background:var(--bg);
  border-radius:999px;border:1px solid var(--stroke);
  box-shadow:inset 8px 8px 14px rgba(15,23,42,.10), inset -8px -8px 14px rgba(255,255,255,.92)
}
.slider:before{
  content:"";position:absolute;height:20px;width:20px;left:3px;top:2px;border-radius:999px;
  background:var(--bg2);box-shadow:6px 6px 14px rgba(15,23,42,.12), -6px -6px 14px rgba(255,255,255,.92);
  transition:transform .2s ease
}
.switch input:checked + .slider:before{transform:translateX(18px)}

/* upload */
.upload{width:38px;height:38px;border-radius:14px;display:grid;place-items:center;cursor:pointer;
  background:var(--bg);border:1px solid var(--stroke);
  box-shadow:10px 10px 18px rgba(15,23,42,.12), -10px -10px 18px rgba(255,255,255,.92)
}
.upload input{display:none}
.upload span{font-weight:900;color:rgba(15,23,42,.70)}

/* layout */
.wrap{position:relative;z-index:1;max-width:980px;margin:0 auto;padding:18px 14px 80px}
.section{margin-top:18px}
.h2{margin:0 0 8px;font-size:18px}
.p{margin:0 0 14px;color:var(--muted);font-size:13px}

/* carousel ring */
.carousel{
  border-radius:28px;padding:18px 14px;
  background:rgba(246,247,251,.78);
  border:1px solid var(--stroke);
  box-shadow:14px 14px 40px var(--shadow-dark), -14px -14px 40px var(--shadow-light);
  overflow:hidden
}
.ring{position:relative;height:240px;transform-style:preserve-3d;perspective:900px}
.card{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:160px;height:220px;border:0;cursor:pointer;
  background:transparent
}
.card-face{
  width:100%;height:100%;border-radius:28px;
  background:var(--bg2);
  border:1px solid var(--stroke);
  box-shadow:14px 14px 34px rgba(15,23,42,.14), -14px -14px 34px rgba(255,255,255,.92);
  display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;
  padding:14px
}
.card-icon{font-size:20px;opacity:.9;margin-bottom:auto}
.card-title{font-weight:900;font-size:14px}
.card-sub{font-size:12px;color:var(--muted);margin-top:4px}

/* viewer */
.viewer{
  border-radius:28px;padding:16px;
  background:rgba(246,247,251,.78);
  border:1px solid var(--stroke);
  box-shadow:14px 14px 40px var(--shadow-dark), -14px -14px 40px var(--shadow-light)
}
.viewer-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:12px}
.viewer-title{font-weight:900;font-size:16px}
.viewer-desc{font-size:12px;color:var(--muted);margin-top:4px}
.viewer-media{
  border-radius:22px;overflow:hidden;background:var(--bg);
  border:1px solid var(--stroke);
  box-shadow:inset 10px 10px 18px rgba(15,23,42,.08), inset -10px -10px 18px rgba(255,255,255,.92);
  aspect-ratio:16/9
}
.viewer-media img,
.viewer-media video{width:100%;height:100%;object-fit:cover;display:block;background:#000}
.viewer-full{min-width:110px}

/* thumbs */
.thumbs{display:flex;gap:10px;overflow:auto;padding:6px 4px}
.thumbs::-webkit-scrollbar{height:8px}
.thumbs::-webkit-scrollbar-thumb{background:rgba(15,23,42,.12);border-radius:999px}
.thumb{
  width:120px;flex:0 0 auto;
  border-radius:18px;overflow:hidden;border:1px solid var(--stroke);
  background:var(--bg2);
  box-shadow:10px 10px 24px rgba(15,23,42,.12), -10px -10px 24px rgba(255,255,255,.92);
  cursor:pointer
}
.thumb img{width:100%;height:72px;object-fit:cover;display:block}
.thumb.active{outline:2px solid var(--accent); outline-offset:2px}

/* tone */
.tone{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width:820px){.tone{grid-template-columns:1fr}}
.tone-card{
  border-radius:22px;padding:14px;
  background:rgba(246,247,251,.78);
  border:1px solid var(--stroke);
  box-shadow:14px 14px 40px var(--shadow-dark), -14px -14px 40px var(--shadow-light)
}
.tone-title{font-weight:900}
.tone-sub{margin-top:6px;color:var(--muted);font-size:12px}

/* chat (hidden for now) */
.hidden{display:none}
.msg{padding:10px 12px;border-radius:16px;margin:8px 0;max-width:92%}
.msg.u{background:rgba(96,165,250,.12);margin-left:auto}
.msg.a{background:rgba(251,113,133,.10)}
/* PATCH: Disable page background image layer (curtain-bg1) */
#bg-layer { display: none !important; }
.chat{
  transition:max-height .35s ease, opacity .35s ease, margin .35s ease, padding .35s ease;
  max-height:0;opacity:0;overflow:hidden;margin:0;padding:0;
}
.chat.show{
  max-height:500px;
  opacity:1;
  padding:12px 0 0;
  margin-top:12px;
}
